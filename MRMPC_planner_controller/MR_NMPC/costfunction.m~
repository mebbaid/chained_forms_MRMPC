function cost = costfunction(cc, np, ny, Ts, x0, model_type,costFunc,yd,t0)
%Function computing the cost function over np steps
% Author: Mohamed Elobaid DIAG Sapienza 2019
   u = cc;
    cost = 0;
    % check for defined cost function
   
    cost_flag = costFunc();
    if cost_flag ~= 0
        %[x,y] =  OpenloopPrediction(np, Ts, x0,u, model_type,ny,t0);
        if (strcmp(model_type, 'DT'))
            for k = 1:np
                [x(:,k), y(:,k)] = Prediction_model(x0,u,Ts,t0);
                x0 = x(:,k);
            end
        elseif (strcmp(model_type, 'CT'))
                error('Provide a DT model, or an odefun handle');
        end
%         for k=1:np
%             cost = cost+stage_cost(ny, y(:,k),yd(:,k), cc(:,k));
%         end
%         cost = cost+terminal_cost(x0);
        for k = 1:np
       cost = -sum(cc(1,k)^2)
        end
        cc
    elseif cost_flag == 0
        error('Provide a cost function');
    end
end